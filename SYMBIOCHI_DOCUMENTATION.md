# Symbiochi

Техническая и дизайнерская документация, восстановленная и уточнённая на основе реального кода проекта.

---

## 1. Общая идея проекта

Symbiochi — это эволюционная симуляция организма в реальном времени, где форма тела полностью процедурная, рост и мутации являются следствием состояния и среды, а визуал — прямым отображением симуляции.

Игрок не управляет существом напрямую, а влияет через уход и условия.

---

## 2. Структура проекта

index.html — точка входа  
js/main.js — инициализация, циклы, время  
js/config.js — все параметры симуляции  
js/creature.js — модель организма  
js/log.js — журнал событий  

js/mods:
- evo.js — эволюция и мутации  
- budding.js — почкование  
- carrots.js — еда и локальные мутации  
- colors.js — цветовая логика  
- glow.js — подсветка  

js/FX:
- pipeline.js — FX-пайплайн  
- webgl_pass.js — WebGL проход  
- barrel.js — дисторшн  
- chromatic.js — аберрации  

---

## 3. Архитектурный принцип

Render и FX никогда не изменяют состояние симуляции.
State изменяется только логическими модулями.

---

## 4. Игровое время

- мировое время не зависит от FPS
- поддерживается оффлайн-прогресс
- мутации догоняются постепенно

---

## 5. Модель организма

- тело — связный набор блоков
- нет изолированных клеток
- 1 блок = 4×4 px
- рост всегда анимирован

Ядро и глаза растут вместе с телом и не превышают 10% объёма.

---

## 6. Органы

Антенны, щупальца, хвосты, лапы, шипы, панцирь, глаза.
Новые органы появляются минимальными и растут со временем.

---

## 7. Эволюция

Мутации зависят от:
size, mobility, defense, sensory, stress

Не более 2 мутаций за тик.

---

## 8. Морковки

- существуют в мировых координатах
- стимулируют рост отростков
- являются источником локальных мутаций

---

## 9. Почкование

Длинный подвижный отросток может отделиться и стать новым организмом с собственным временем.

---

## 10. Визуальные эффекты

WebGL post-processing:
- barrel distortion
- хроматические аберрации
- виньетка

FX не знают ничего о логике игры.

---

## 11. Цветовая система

>80% — зелёный  
>60% — синий  
>20% — жёлтый  
>0% — красный  

---

## 12. Правила расширения

Разрешено:
- добавлять mods
- расширять FX

Запрещено:
- менять state из render
- хардкодить формы

---

## 13. Назначение проекта

Symbiochi — песочница эволюции и генератор форм жизни.
